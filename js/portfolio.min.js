function onYouTubeIframeAPIReady(){Portfolio.template.showreel.loaded()}(function(a,b){Portfolio={init:function(a){Portfolio.template.init(),Portfolio.navigation.changeState(!0,"loading"),Portfolio.getData.init(function(){Portfolio.getData.albums(),Portfolio.getData.galleries(),Portfolio.template.start(),Portfolio.navigation.gallery.preload(0,function(){"function"==typeof a&&a.call(this)})})},start:function(){Portfolio.route.init(),Portfolio.navigation.init()},support:function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)&&(Portfolio.CONFIG.isMobile=!0,Portfolio.navigation.changeState(!0,"mobile"))},UI:{root:$("#super-container"),nav:$("nav"),navContainer:$("aside"),mobileNav:$("header#responsive"),galleriesContainer:$("#galleries-container"),galleries:$("#galleries-container #galleries"),projectContainer:$("#project-container"),projects:$("#project-container #projects"),projectTemplate:$(".project#template"),showreel:$("#super-container>#showreel"),aboutContainer:$("#about-container"),about:$("#about-container #about")},DATASOURCES:{albums:[],galleries:[],pictures:[],childGalleries:[],allGalleries:[]},CONFIG:{site_domain:"http://"+a.top.location.hostname,site_root:"/",first_time:!0,json_path:"js/data.json",active_album:"",active_album_slug:"web-design",recent_gallery:"",active_gallery:"",gallery_images_path:"gallery/",active_album_title:"",active_gallery_title:"",active_gallery_slug:"",album_filters:".web-design",resize_timer:0,gallery_mode:"blogMode",open_popin:"",showreel_url:"http://www.youtube.com/embed/zh8xD8BE2YA?autoplay=1&hd=1",video_size:.7,player:"",playerLoaded:!1,isInMotion:!1,isDirectAccess:!1,isMobile:!1},GLOBAL:{History:a.History},getData:{init:function(a){$.ajax({type:"GET",url:Portfolio.CONFIG.json_path,dataType:"json",success:function(b){Portfolio.DATASOURCES.albums=b.albums,Portfolio.DATASOURCES.galleries=b.galleries,Portfolio.DATASOURCES.pictures=b.pictures,"function"==typeof a&&a.call(this)},error:function(a,b,c){console.log("**ALERT** AJAX ERROR "+a.status+" : "+c)}})},albums:function(){$albums=Portfolio.DATASOURCES.albums,Portfolio.navigation.album.create($albums)},galleries:function(){$galleries=Portfolio.DATASOURCES.galleries,$gallery=$galleries.Galleries;var a=[];$albums=Portfolio.DATASOURCES.albums,$album=$albums.Albums,$.each($albums.Albums,function(b){a.length=0,a=$.grep($gallery,function(a){return-1!=$.inArray(a.gid,Portfolio.DATASOURCES.childGalleries[$album[b].id])}),$.map(a,function(a){return a.album=$album[b].slug}),$.merge(Portfolio.DATASOURCES.allGalleries,a)})},getGalleryData:function(a,c){$galleries=Portfolio.DATASOURCES.galleries,$gallery=$galleries.Galleries;var d;return $.each($gallery,function(e,f){return f.slug==c?("id"==a&&(d=f.gid),"title"==a&&(d=f.title),!1):b}),d},pictures:function(a){return console.log("getting pictures data:"+a),$pictures=Portfolio.DATASOURCES.pictures,$picture=$pictures.Pictures,arr=$.grep($picture,function(b){return b.galleryid==a})}},navigation:{init:function(){Portfolio.navigation.gallery.create(),Portfolio.navigation.album.show(),Portfolio.CONFIG.isDirectAccess?$("body").removeClass("intro"):$("body").addClass("intro"),Portfolio.UI.root.addClass("enable"),$(document).keyup(function(a){27==a.keyCode&&Portfolio.navigation.home()}),$(a).scroll(function(){0==$(this).scrollTop()?$(".goTop").removeClass("enable"):$(".goTop").addClass("enable")}),Portfolio.UI.nav.find("#about").click(function(a){a.preventDefault(),Portfolio.route.pushUrl("about"),Portfolio.navigation.changeState(!1,"mobileNav-open")}),$(".goTop").click(function(a){a.preventDefault(),Portfolio.template.resize.scrollTop()}),Portfolio.template.about.init(),Portfolio.navigation.album.launch(),Portfolio.UI.mobileNav.find("#nav-toggler").click(function(a){a.preventDefault(),Portfolio.navigation.changeState(!0,"mobileNav-open")})},changeState:function(a,b){a?$("body").addClass(b):$("body").removeClass(b)},home:function(){console.log("going home"),Portfolio.CONFIG.recent_gallery=Portfolio.CONFIG.active_gallery,Portfolio.CONFIG.active_gallery="",Portfolio.route.pushUrl()},album:{create:function(a){var b,c,d,f,g="",h=a,i=h.Albums;$.each(h.Albums,function(a){f="",b=i[a].name,c=i[a].id,d=i[a].slug,Portfolio.DATASOURCES.childGalleries[c]=h.Albums[a].galleries,getActiveFilter=Portfolio.CONFIG.album_filters,"."+d==getActiveFilter&&(f="active"),$nav_el="",$nav_el="<a class='album-links "+f+"' href='#' data-slug="+d+" id="+c+"><span>"+b+"</span></a>",g+=$nav_el}),Portfolio.UI.nav.prepend(g),Portfolio.UI.nav.find(".album-links").click(function(a){a.preventDefault();var b=$(this).data("slug");Portfolio.navigation.album.setActive(b),Portfolio.navigation.album.launch(b),Portfolio.navigation.changeState(!1,"mobileNav-open")})},show:function(){Portfolio.UI.nav.addClass("enabled")},activate:function(a){"."==a.charAt(0)&&(a=a.substring(1)),console.log("activating: "+a);var b=Portfolio.UI.nav.find(".album-links[data-slug='"+a+"']"),c=Portfolio.UI.nav.find(".album-links");c.removeClass("active"),b.addClass("active"),Portfolio.CONFIG.album_filters="."+a},setActive:function(a){a=a.replace("#","");var b=Portfolio.UI.nav.find(".album-links[data-slug='"+a+"']");Portfolio.CONFIG.active_album=b.attr("id"),Portfolio.CONFIG.active_album_slug=b.data("slug"),Portfolio.CONFIG.active_album_title=b.text()},launch:function(a){"showreel"==a?Portfolio.route.pushUrl("showreel"):(Portfolio.navigation.album.activate(a||Portfolio.CONFIG.album_filters),Portfolio.UI.galleries.find(".element").removeClass("active"),Portfolio.UI.galleries.find(Portfolio.CONFIG.album_filters).addClass("active"),console.log("filtering by : "+Portfolio.CONFIG.album_filters))}},gallery:{initTogglers:function(){Portfolio.UI.root.find("#layouts a").click(function(a){a.preventDefault(),$newGalleryMode=$(this).attr("id"),Portfolio.navigation.gallery.setToggler($newGalleryMode),Portfolio.UI.galleriesContainer.removeClass(Portfolio.CONFIG.gallery_mode).addClass($newGalleryMode),Portfolio.CONFIG.gallery_mode=$newGalleryMode,Portfolio.template.gallery[$newGalleryMode]()})},setToggler:function(a){Portfolio.UI.root.find("#layouts a").removeClass("active"),Portfolio.UI.root.find("#layouts a#"+a).addClass("active")},preload:function(a,b){var d=(Portfolio.DATASOURCES.galleries,$galleries.Galleries);0==a&&Portfolio.template.preloader.show(),Portfolio.template.preloader.setLoadingProgress(d.length/a),a==d.length?(Portfolio.start(),Portfolio.navigation.changeState(!1,"loading"),Portfolio.template.preloader.hide(),"function"==typeof b&&b.call(this)):Portfolio.navigation.gallery.preloadImage(a,b)},preloadImage:function(a,b){var d=(Portfolio.DATASOURCES.galleries,$galleries.Galleries),e=Portfolio.CONFIG.site_domain+Portfolio.CONFIG.site_root,f=d[a].slug,g=d[a].filename,h=e+Portfolio.CONFIG.gallery_images_path+f+"/"+g;$("<img src='"+h+"'>").load(function(){Portfolio.navigation.gallery.preload(a+1,b)}),$("<img src='"+h+"'>").error(function(){Portfolio.navigation.gallery.preload(a+1,b)})},create:function(a){var c=Portfolio.DATASOURCES.allGalleries,d=Portfolio.UI.galleries,e=Portfolio.UI.galleriesContainer,f=Portfolio.CONFIG.gallery_mode;d.empty(),c.length>0&&$.each(c,function(a){getAlbum=c[a].album,getID=c[a].gid,getName=c[a].title,getSlug=c[a].slug,getDesc=c[a].galdesc,getThumb=c[a].filename,getRoot=Portfolio.CONFIG.site_domain+Portfolio.CONFIG.site_root,bgURL=getRoot+Portfolio.CONFIG.gallery_images_path+getSlug+"/"+getThumb,$nav_el="",$nav_el="<a href='"+Portfolio.route.createUrl(getSlug,getAlbum)+"' class='element gallery-holder "+getAlbum+"' id="+getID+" style='background-image:url("+bgURL+")'"+" data-album='"+getAlbum+"' data-slug="+getSlug+">"+"<div><h2>"+getName+"</h2>"+"<img class='poster' src='"+bgURL+"' style='display:none'>"+"<p>"+getDesc+"</p></div>"+"</a>",d.append($nav_el)}),d.find(".gallery-holder").click(function(a){a.preventDefault(),Portfolio.CONFIG.active_album_title=$(this).data("album"),Portfolio.navigation.gallery.setActive($(this).data("slug")),Portfolio.route.pushUrl()}),e.addClass(f),Portfolio.navigation.gallery.initTogglers(),Portfolio.template.gallery[f](),Portfolio.navigation.gallery.setToggler(f),"function"==typeof a&&a.call(this)},launch:function(a){"2012"!=a?(getPictures=Portfolio.getData.pictures(Portfolio.getData.getGalleryData("id",a)),Portfolio.template.project.create(getPictures,a),Portfolio.template.project.open()):Portfolio.template.showreel.create()},getActive:function(){if(""!=Portfolio.CONFIG.active_gallery){var a=Portfolio.UI.galleries.find("#"+Portfolio.CONFIG.active_gallery);return a}return""},getRecent:function(){if(""!=Portfolio.CONFIG.recent_gallery){var a=Portfolio.UI.galleries.find("#"+Portfolio.CONFIG.recent_gallery);return a}return""},setActive:function(a){Portfolio.CONFIG.recent_gallery=Portfolio.CONFIG.active_gallery,Portfolio.CONFIG.active_gallery_slug=a,Portfolio.CONFIG.active_gallery_title=Portfolio.getData.getGalleryData("title",a),Portfolio.CONFIG.active_gallery=Portfolio.getData.getGalleryData("id",a)}},project:{init:function(){Portfolio.UI.projectTemplate.find(".side a").click(function(a){console.log("clicked side"),a.preventDefault(),Portfolio.CONFIG.active_album_title=$(this).data("album"),Portfolio.navigation.gallery.setActive($(this).data("slug")),Portfolio.route.pushUrl(),1==$(this).index()?Portfolio.UI.projectContainer.find(".left.nav").hide():Portfolio.UI.projectContainer.find(".left.nav").show(),$(this).is(":last-child")?Portfolio.UI.projectContainer.find(".right.nav").hide():Portfolio.UI.projectContainer.find(".right.nav").show()}),Portfolio.UI.projectTemplate.find(".closer").click(function(a){a.preventDefault(),Portfolio.navigation.home()}),Portfolio.UI.projectContainer.find(".right.nav").click(function(a){a.preventDefault(),Portfolio.UI.projects.children(":first").find(".side a.active").next().trigger("click")}),Portfolio.UI.projectContainer.find(".left.nav").click(function(a){a.preventDefault(),Portfolio.UI.projects.children(":first").find(".side a.active").prev().trigger("click")}),$(document).keyup(function(a){39==a.keyCode?Portfolio.UI.projects.children(":first").find(".side a.active").next().trigger("click"):37==a.keyCode&&Portfolio.UI.projects.children(":first").find(".side a.active").prev().trigger("click")})},isSlideForward:function(){if(""==Portfolio.CONFIG.recent_gallery)return!0;var a=Portfolio.UI.projects.children(":first").find(".side a#"+Portfolio.CONFIG.recent_gallery).index(),b=Portfolio.UI.projects.children(":first").find(".side a#"+Portfolio.CONFIG.active_gallery).index();return b>a?!0:!1}}},template:{init:function(){Portfolio.template.showreel.init(),Portfolio.template.preloader.init(),Portfolio.template.blackScreen.init()},start:function(){$(a).resize(function(){clearTimeout(Portfolio.CONFIG.resize_timer),Portfolio.CONFIG.resize_timer=setTimeout(Portfolio.template.resize.init,100)}),Portfolio.template.resize.albums(),Portfolio.template.project.init()},resize:{init:function(){Portfolio.template.resize.albums()},albums:function(){Portfolio.UI.nav.css("margin-top",Portfolio.UI.navContainer.height()/2-Portfolio.UI.nav.height()/2)},scrollTop:function(a){console.log("resize function"),$.isNumeric(a)?$("body,html").scrollTop(a):"static"==a?$("body,html").scrollTop(0):$("body,html").animate({scrollTop:0},800)},scrollBottom:function(a){$.isNumeric(a)?$("body,html").scrollTop(a):"static"==a?$("body,html").scrollTop($(document).height()):(console.log("scrolling down to :"+$(document).height()),$("html, body").animate({scrollTop:$(document).height()},5e4))}},gallery:{show:function(){Portfolio.navigation.changeState(!0,"galleries-open")},hide:function(){Portfolio.navigation.changeState(!1,"galleries-open")},posterMode:function(){},tileMode:function(){},blogMode:function(){}},project:{init:function(){$galleries=Portfolio.DATASOURCES.galleries,$gallery=$galleries.Galleries,$.each($gallery,function(a){getName=$gallery[a].title,getAlbum=$gallery[a].album,getID=$gallery[a].gid,getSlug=$gallery[a].slug,Portfolio.UI.projectTemplate.find(".side").append("<a href='"+Portfolio.route.createUrl(getSlug,getAlbum)+"' id='"+getID+"' data-album='"+getAlbum+"' data-slug='"+getSlug+"' >"+getName+"</a>")}),Portfolio.navigation.project.init()},create:function(a,b){var c="",d=a,e=Portfolio.UI.projects,f=Portfolio.UI.projectTemplate.clone(!0),g=f.find("h2"),h=f.find(".gallery-description");$projectBody=f.find(".content"),$projectSide=f.find(".side"),getSlug=b,f.attr("id",""),$.each($projectSide.find("a"),function(){$(this).data("album")!=Portfolio.CONFIG.active_album_slug&&$(this).remove()}),g.html(Portfolio.CONFIG.active_gallery_title),h.html(Portfolio.navigation.gallery.getActive().find("p").text()),$filePath=Portfolio.CONFIG.site_domain+Portfolio.CONFIG.site_root+Portfolio.CONFIG.gallery_images_path,$.each(d,function(a){$getID=d[a].pid,$getSource=d[a].filename,$getDescription=d[a].description,$getWidth=d[a].metaWidth,$getHeight=d[a].metaHeight,$getPrevID=d[a].previewpic,$getID!=$getPrevID&&($pic_el="<img src='"+$filePath+getSlug+"/"+$getSource+"' width="+$getWidth+"  height="+$getHeight+" class='projectImage' "+"  id='"+$getID+"'>"+"<div class='description'>"+$getDescription+"</div>",c+=$pic_el)}),$projectSide.find("a#"+Portfolio.CONFIG.active_gallery).addClass("active"),$projectBody.append(c),$projectBody.css("background-image","url("+$filePath+getSlug+"/bg.jpg)"),$projectBody.parent().css("padding-left","50px").animate({paddingLeft:"0px"},1500),e.prepend(f)},open:function(){$("html,body").stop();var a,b;Portfolio.navigation.project.isSlideForward()?(a="right",b="left"):(a="left",b="right"),Portfolio.UI.projectContainer.slide("in",a,"#projects","slide"),Portfolio.template.resize.scrollTop("static"),Portfolio.CONFIG.open_popin="project",Portfolio.navigation.changeState(!0,"project-open"),Portfolio.UI.projects.children().size()>1&&Portfolio.UI.projectContainer.slide("out",b,"#projects","slide")},close:function(){Portfolio.navigation.changeState(!1,"project-open"),Portfolio.template.resize.scrollTop("static"),Portfolio.UI.projectContainer.slide("out","left","#projects","slide",function(){var a=Portfolio.navigation.gallery.getRecent();""!=a&&Portfolio.template.resize.scrollTop(a.offset().top-a.height()/2)})}},closepopin:function(){""!=Portfolio.CONFIG.open_popin&&(Portfolio.template[Portfolio.CONFIG.open_popin].close(),Portfolio.CONFIG.open_popin="")},showreel:{init:function(){Portfolio.UI.showreel.find(".closer").click(function(a){a.preventDefault(),Portfolio.navigation.home()});var a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)},loaded:function(){Portfolio.CONFIG.player=new YT.Player("showreel-player",{height:"390",width:"640",videoId:"zh8xD8BE2YA?",events:{onReady:Portfolio.template.showreel.ready}}),Portfolio.CONFIG.playerLoaded=!0},ready:function(){Portfolio.template.showreel.pause=function(){Portfolio.CONFIG.player.stopVideo()},Portfolio.template.showreel.play=function(){Portfolio.CONFIG.playerLoaded&&Portfolio.CONFIG.player.playVideo()}},pause:function(){},play:function(){},create:function(){Portfolio.template.showreel.open()},open:function(){Portfolio.UI.showreel.centerThis(),Portfolio.template.showreel.play(),Portfolio.CONFIG.open_popin="showreel",Portfolio.navigation.changeState(!0,"showreel-open")},close:function(){Portfolio.navigation.changeState(!1,"showreel-open"),Portfolio.template.showreel.pause(),Portfolio.CONFIG.open_popin=""},center:function(){var b=Portfolio.CONFIG.video_size,c=$(a).width()/2-$(a).width()*b/2,d=$(a).height()/2-$(a).height()*b/2;Portfolio.UI.showreel.css("left",c),Portfolio.UI.showreel.css("top",d/2)}},about:{init:function(){Portfolio.UI.about.find(".closer").click(function(a){a.preventDefault(),Portfolio.navigation.home()})},open:function(){Portfolio.UI.aboutContainer.centerThis(),Portfolio.UI.aboutContainer.slide("in","top",".panel-container","single"),Portfolio.navigation.changeState(!0,"about-open"),Portfolio.CONFIG.open_popin="about"},close:function(){Portfolio.UI.aboutContainer.slide("out","bottom",".panel-container","single",function(){Portfolio.navigation.changeState(!1,"about-open"),Portfolio.CONFIG.open_popin=""})}},blackScreen:{init:function(){var a=$("<div class='blackScreen'></div>");Portfolio.UI.root.append(a),$(".blackScreen").click(function(){Portfolio.navigation.home()})},show:function(){$(".blackScreen").show()},hide:function(){$(".blackScreen").hide()}},preloader:{init:function(){var a=$("<div id='preloader'><span id='bar'></span></div>");$("body").append(a)},show:function(){$("#preloader").css("display","block")},hide:function(){$("#preloader").hide()},setLoadingProgress:function(b){var c=$(a).width(),d=c/b;$("#preloader>#bar").css("width",d+"px")}}},route:{init:function(){Portfolio.route.setChangeEvent()},setChangeEvent:function(){$(a).bind("statechange",function(){Portfolio.route.go()})},createUrl:function(a,b){var c="",d="",e="";return(""!=Portfolio.CONFIG.active_gallery||null!=a||null!=b)&&(e=a||Portfolio.UI.galleries.find(".gallery-holder#"+Portfolio.CONFIG.active_gallery).data("slug"),d=b||Portfolio.CONFIG.active_album_title,c="/"+e),Portfolio.CONFIG.site_root+d+c},pushUrl:function(a){var c;c=null==a||a==b?Portfolio.route.createUrl():Portfolio.CONFIG.site_root+a;var d="LOREN GRIXTI Portfolio : "+Portfolio.CONFIG.active_gallery_slug;Portfolio.GLOBAL.History.pushState(d,"","/"+c),_gaq&&_gaq.push(["_trackEvent","PORTFOLIO","page",Portfolio.CONFIG.active_gallery_slug])},go:function(){url=a.location.href;var b=url.substr((Portfolio.CONFIG.site_domain+Portfolio.CONFIG.site_root).length,url.length);b=b.replace("#./","");var c=b.split("/");switch(console.log("GOING TO : "+b),b){case"showreel":Portfolio.CONFIG.first_time?(Portfolio.CONFIG.isDirectAccess=!0,Portfolio.init(),Portfolio.template.showreel.open()):Portfolio.template.showreel.open(),console.log("executed case: showreel");break;case"about":Portfolio.CONFIG.first_time?(Portfolio.CONFIG.isDirectAccess=!0,Portfolio.init(),Portfolio.template.about.open()):Portfolio.template.about.open(),console.log("executed case: about");break;case"":Portfolio.CONFIG.first_time?(Portfolio.CONFIG.isDirectAccess=!1,Portfolio.init()):Portfolio.template.closepopin(),console.log("executed case: home");break;default:Portfolio.CONFIG.first_time?(Portfolio.CONFIG.isDirectAccess=!0,Portfolio.init(function(){Portfolio.navigation.album.setActive(c[0]),Portfolio.navigation.gallery.setActive(c[1]),Portfolio.navigation.gallery.launch(c[1])})):Portfolio.CONFIG.isInMotion||(Portfolio.navigation.album.setActive(c[0]),Portfolio.CONFIG.active_gallery_slug!=c[1]&&Portfolio.navigation.gallery.setActive(c[1]),Portfolio.navigation.gallery.launch(c[1])),console.log("executed case: default")}Portfolio.CONFIG.first_time=!1}}},$.fn.centerThis=function(){return this.css("top",($(a).height()-this.height())/2),this.css("left",($(a).width()-this.width())/2),this},$.fn.slide=function(b,c,d,e,f){var l,g=this.width()+($(a).width()-this.width())/2,h=this.height()+($(a).height()-this.height())/2,i=c||"left",j=b||"in",k=this;"in"==j?(l=k.find(d).children(":first"),("left"==i||"right"==i)&&("left"==i&&(g=-g),Portfolio.CONFIG.isInMotion=!0,l.css("left",g).show().animate({left:0},800,"easeInOutExpo",function(){Portfolio.CONFIG.isInMotion=!1})),("top"==i||"bottom"==i)&&("top"==i&&(h=-h),Portfolio.CONFIG.isInMotion=!0,l.css("top",h).show().animate({top:0},800,"easeInOutExpo",function(){Portfolio.CONFIG.isInMotion=!1}))):(l=k.find(d).children(":last"),("left"==i||"right"==i)&&("left"==i&&(g=-g),Portfolio.CONFIG.isInMotion=!0,l.css("left",0).animate({left:g},500,"easeInOutExpo",function(){"slide"==e&&l.remove(),Portfolio.CONFIG.isInMotion=!1,"function"==typeof f&&f.call(this)})),("top"==i||"bottom"==i)&&("bottom"==i&&(h=h),Portfolio.CONFIG.isInMotion=!0,l.css("top",0).animate({top:h},500,"easeInOutExpo",function(){"slide"==e&&l.remove(),Portfolio.CONFIG.isInMotion=!1,"function"==typeof f&&f.call(this)})))},Portfolio.support(),Portfolio.route.go()})(window);