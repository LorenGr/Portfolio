function onYouTubeIframeAPIReady(){Portfolio.template.showreel.loaded()}(function(e,t){Portfolio={init:function(e){Portfolio.template.init();Portfolio.navigation.changeState(true,"loading");Portfolio.getData.init(function(){Portfolio.getData.albums();Portfolio.getData.galleries();Portfolio.template.start();Portfolio.navigation.gallery.preload(0,function(){Portfolio.template.resize.albums();Portfolio.navigation.start();if(typeof e=="function"){e.call(this)}})})},start:function(){Portfolio.route.init();Portfolio.navigation.init()},support:function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)){Portfolio.CONFIG.isMobile=true;Portfolio.navigation.changeState(true,"mobile")}},UI:{root:$("#super-container"),nav:$("nav"),navContainer:$("aside"),mobileNav:$("header#responsive"),galleriesContainer:$("#galleries-container"),galleries:$("#galleries-container #galleries"),projectContainer:$("#project-container"),projects:$("#project-container #projects"),projectTemplate:$(".project#template"),showreel:$("#super-container>#showreel"),aboutContainer:$("#about-container"),about:$("#about-container #about")},DATASOURCES:{albums:[],galleries:[],pictures:[],childGalleries:[],allGalleries:[]},CONFIG:{site_domain:"http://"+e.top.location.hostname,site_root:"/",first_time:true,json_path:"js/data.json",active_album:"",active_album_slug:"web-design",recent_gallery:"",active_gallery:"",gallery_images_path:"gallery/",active_album_title:"",active_gallery_title:"",active_gallery_slug:"",album_filters:".web-design",resize_timer:0,gallery_mode:"blogMode",open_popin:"",showreel_url:"http://www.youtube.com/embed/zh8xD8BE2YA?autoplay=1&hd=1",video_size:.7,player:"",playerLoaded:false,isInMotion:false,isDirectAccess:false,isMobile:false},GLOBAL:{History:e.History},getData:{init:function(e){$.ajax({type:"GET",url:Portfolio.CONFIG.json_path,dataType:"json",success:function(t){Portfolio.DATASOURCES.albums=t.albums;Portfolio.DATASOURCES.galleries=t.galleries;Portfolio.DATASOURCES.pictures=t.pictures;if(typeof e=="function"){e.call(this)}},error:function(e,t,n){console.log("**ALERT** AJAX ERROR "+e.status+" : "+n)}})},albums:function(){$albums=Portfolio.DATASOURCES.albums;Portfolio.navigation.album.create($albums)},galleries:function(){$galleries=Portfolio.DATASOURCES.galleries;$gallery=$galleries.Galleries;var e=[];$albums=Portfolio.DATASOURCES.albums;$album=$albums.Albums;$.each($albums.Albums,function(t,n){e.length=0;e=$.grep($gallery,function(e,n){return $.inArray(e.gid,Portfolio.DATASOURCES.childGalleries[$album[t].id])!=-1});$.map(e,function(e,n){return e.album=$album[t].slug});$.merge(Portfolio.DATASOURCES.allGalleries,e)})},getGalleryData:function(e,t){$galleries=Portfolio.DATASOURCES.galleries;$gallery=$galleries.Galleries;var n;$.each($gallery,function(r,i){if(i.slug==t){if(e=="id")n=i.gid;if(e=="title")n=i.title;return false}});return n},pictures:function(e){console.log("getting pictures data:"+e);$pictures=Portfolio.DATASOURCES.pictures;$picture=$pictures.Pictures;arr=$.grep($picture,function(t,n){return t.galleryid==e});return arr}},navigation:{start:function(){Portfolio.navigation.album.show();if(!Portfolio.CONFIG.isDirectAccess){$("body").addClass("intro")}else{$("body").removeClass("intro")}Portfolio.UI.root.addClass("enable");Portfolio.navigation.setScrollTop()},setScrollTop:function(){$(e).scroll(function(){if($(this).scrollTop()==0){$(".goTop").removeClass("enable")}else{$(".goTop").addClass("enable")}});$(".goTop").click(function(e){e.preventDefault();Portfolio.template.resize.scrollTop()})},init:function(){Portfolio.navigation.gallery.create();$(document).keyup(function(e){if(e.keyCode==27){Portfolio.navigation.home()}});Portfolio.UI.nav.find("#about").click(function(e){e.preventDefault();Portfolio.route.pushUrl("about");Portfolio.navigation.changeState(false,"mobileNav-open")});Portfolio.template.about.init();Portfolio.navigation.album.launch();Portfolio.UI.mobileNav.find("#nav-toggler").click(function(e){e.preventDefault();Portfolio.navigation.changeState(true,"mobileNav-open")})},changeState:function(e,t){if(e)$("body").addClass(t);else $("body").removeClass(t)},home:function(){console.log("going home");Portfolio.CONFIG.recent_gallery=Portfolio.CONFIG.active_gallery;Portfolio.CONFIG.active_gallery="";Portfolio.route.pushUrl()},album:{create:function(e){var t,n,r,i,s,o="",u=e,a=u.Albums;$.each(u.Albums,function(e,i){s="";t=a[e].name;n=a[e].id;r=a[e].slug;Portfolio.DATASOURCES.childGalleries[n]=u.Albums[e].galleries;getActiveFilter=Portfolio.CONFIG.album_filters;if("."+r==getActiveFilter)s="active";$nav_el="";$nav_el="<a class='album-links "+s+"' href='#' data-slug="+r+" id="+n+"><span>"+t+"</span></a>";o+=$nav_el});Portfolio.UI.nav.prepend(o);Portfolio.UI.nav.find(".album-links").click(function(e){e.preventDefault();var t=$(this).data("slug");Portfolio.navigation.album.setActive(t);Portfolio.navigation.album.launch(t);Portfolio.navigation.changeState(false,"mobileNav-open")})},show:function(){Portfolio.UI.nav.addClass("enabled")},activate:function(e){if(e.charAt(0)==".")e=e.substring(1);console.log("activating: "+e);var t=Portfolio.UI.nav.find(".album-links[data-slug='"+e+"']"),n=Portfolio.UI.nav.find(".album-links");n.removeClass("active");t.addClass("active");Portfolio.CONFIG.album_filters="."+e},setActive:function(e){e=e.replace("#","");var t=Portfolio.UI.nav.find(".album-links[data-slug='"+e+"']");Portfolio.CONFIG.active_album=t.attr("id");Portfolio.CONFIG.active_album_slug=t.data("slug");Portfolio.CONFIG.active_album_title=t.text()},launch:function(e){if(e=="showreel"){Portfolio.route.pushUrl("showreel")}else{Portfolio.navigation.album.activate(e||Portfolio.CONFIG.album_filters);Portfolio.UI.galleries.find(".element").removeClass("active");Portfolio.UI.galleries.find(Portfolio.CONFIG.album_filters).addClass("active");console.log("filtering by : "+Portfolio.CONFIG.album_filters)}}},gallery:{initTogglers:function(){Portfolio.UI.root.find("#layouts a").click(function(e){e.preventDefault();$newGalleryMode=$(this).attr("id");Portfolio.navigation.gallery.setToggler($newGalleryMode);Portfolio.UI.galleriesContainer.removeClass(Portfolio.CONFIG.gallery_mode).addClass($newGalleryMode);Portfolio.CONFIG.gallery_mode=$newGalleryMode;Portfolio.template.gallery[$newGalleryMode]()})},setToggler:function(e){Portfolio.UI.root.find("#layouts a").removeClass("active");Portfolio.UI.root.find("#layouts a#"+e).addClass("active")},preload:function(e,t){var n=Portfolio.DATASOURCES.galleries,r=$galleries.Galleries,i;if(e==0){Portfolio.template.preloader.show()}Portfolio.template.preloader.setLoadingProgress(r.length/e);if(e==r.length){Portfolio.start();Portfolio.navigation.changeState(false,"loading");Portfolio.template.preloader.hide();if(typeof t=="function"){t.call(this)}}else{Portfolio.navigation.gallery.preloadImage(e,t)}},preloadImage:function(e,t){var n=Portfolio.DATASOURCES.galleries,r=$galleries.Galleries,i=Portfolio.CONFIG.site_domain+Portfolio.CONFIG.site_root,s=r[e].slug,o=r[e].filename,u=i+Portfolio.CONFIG.gallery_images_path+s+"/"+o;$("<img src='"+u+"'>").load(function(){Portfolio.navigation.gallery.preload(e+1,t)});$("<img src='"+u+"'>").error(function(){Portfolio.navigation.gallery.preload(e+1,t)})},create:function(e){var t="",n=Portfolio.DATASOURCES.allGalleries,r=Portfolio.UI.galleries,i=Portfolio.UI.galleriesContainer,s=Portfolio.CONFIG.gallery_mode,o=0;r.empty();if(n.length>0){$.each(n,function(e,t){getAlbum=n[e].album;getID=n[e].gid;getName=n[e].title;getSlug=n[e].slug;getDesc=n[e].galdesc;getThumb=n[e].filename;getRoot=Portfolio.CONFIG.site_domain+Portfolio.CONFIG.site_root;bgURL=getRoot+Portfolio.CONFIG.gallery_images_path+getSlug+"/"+getThumb;$nav_el="";$nav_el="<a href='"+Portfolio.route.createUrl(getSlug,getAlbum)+"' class='element gallery-holder "+getAlbum+"' id="+getID+" style='background-image:url("+bgURL+")'"+" data-album='"+getAlbum+"' data-slug="+getSlug+">"+"<div><h2>"+getName+"</h2>"+"<img class='poster' src='"+bgURL+"' style='display:none'>"+"<p>"+getDesc+"</p></div>"+"</a>";r.append($nav_el)})}r.find(".gallery-holder").click(function(e){e.preventDefault();Portfolio.CONFIG.active_album_title=$(this).data("album");Portfolio.navigation.gallery.setActive($(this).data("slug"));Portfolio.route.pushUrl()});i.addClass(s);Portfolio.navigation.gallery.initTogglers();Portfolio.template.gallery[s]();Portfolio.navigation.gallery.setToggler(s);if(typeof e=="function"){e.call(this)}},launch:function(e){if(e!="2012"){getPictures=Portfolio.getData.pictures(Portfolio.getData.getGalleryData("id",e));Portfolio.template.project.create(getPictures,e);Portfolio.template.project.open()}else{Portfolio.template.showreel.create()}},getActive:function(){if(Portfolio.CONFIG.active_gallery!=""){var e=Portfolio.UI.galleries.find("#"+Portfolio.CONFIG.active_gallery);return e}else{return""}},getRecent:function(){if(Portfolio.CONFIG.recent_gallery!=""){var e=Portfolio.UI.galleries.find("#"+Portfolio.CONFIG.recent_gallery);return e}else{return""}},setActive:function(e){Portfolio.CONFIG.recent_gallery=Portfolio.CONFIG.active_gallery;Portfolio.CONFIG.active_gallery_slug=e;Portfolio.CONFIG.active_gallery_title=Portfolio.getData.getGalleryData("title",e);Portfolio.CONFIG.active_gallery=Portfolio.getData.getGalleryData("id",e)}},project:{init:function(){Portfolio.UI.projectTemplate.find(".side a").click(function(e){console.log("clicked side");e.preventDefault();Portfolio.CONFIG.active_album_title=$(this).data("album");Portfolio.navigation.gallery.setActive($(this).data("slug"));Portfolio.route.pushUrl();if($(this).index()==1){Portfolio.UI.projectContainer.find(".left.nav").hide()}else{Portfolio.UI.projectContainer.find(".left.nav").show()}if($(this).is(":last-child")){Portfolio.UI.projectContainer.find(".right.nav").hide()}else{Portfolio.UI.projectContainer.find(".right.nav").show()}});Portfolio.UI.projectTemplate.find(".closer").click(function(e){e.preventDefault();Portfolio.navigation.home()});Portfolio.UI.projectContainer.find(".right.nav").click(function(e){e.preventDefault();Portfolio.UI.projects.children(":first").find(".side a.active").next().trigger("click")});Portfolio.UI.projectContainer.find(".left.nav").click(function(e){e.preventDefault();Portfolio.UI.projects.children(":first").find(".side a.active").prev().trigger("click")});$(document).keyup(function(e){if(e.keyCode==39){Portfolio.UI.projects.children(":first").find(".side a.active").next().trigger("click")}else if(e.keyCode==37){Portfolio.UI.projects.children(":first").find(".side a.active").prev().trigger("click")}})},isSlideForward:function(){if(Portfolio.CONFIG.recent_gallery!=""){var e=Portfolio.UI.projects.children(":first").find(".side a#"+Portfolio.CONFIG.recent_gallery).index()}else{return true}var t=Portfolio.UI.projects.children(":first").find(".side a#"+Portfolio.CONFIG.active_gallery).index();return t>e?true:false}}},template:{init:function(){Portfolio.template.showreel.init();Portfolio.template.preloader.init();Portfolio.template.blackScreen.init()},start:function(){$(e).resize(function(){clearTimeout(Portfolio.CONFIG.resize_timer);Portfolio.CONFIG.resize_timer=setTimeout(Portfolio.template.resize.init,100)});Portfolio.template.project.init()},resize:{init:function(){Portfolio.template.resize.albums()},albums:function(){Portfolio.UI.nav.css("margin-top",$(e).height()/2-Portfolio.UI.nav.height()/2)},scrollTop:function(e){console.log("resize function");if($.isNumeric(e)){$("body,html").scrollTop(e)}else{if(e=="static"){$("body,html").scrollTop(0)}else{$("body,html").animate({scrollTop:0},800)}}},scrollBottom:function(e){if($.isNumeric(e)){$("body,html").scrollTop(e)}else{if(e=="static"){$("body,html").scrollTop($(document).height())}else{console.log("scrolling down to :"+$(document).height());$("html, body").animate({scrollTop:$(document).height()},5e4)}}}},gallery:{show:function(){Portfolio.navigation.changeState(true,"galleries-open")},hide:function(){Portfolio.navigation.changeState(false,"galleries-open")},posterMode:function(){},tileMode:function(){},blogMode:function(){}},project:{init:function(){$galleries=Portfolio.DATASOURCES.galleries;$gallery=$galleries.Galleries;$.each($gallery,function(e,t){getName=$gallery[e].title;getAlbum=$gallery[e].album;getID=$gallery[e].gid;getSlug=$gallery[e].slug;Portfolio.UI.projectTemplate.find(".side").append("<a href='"+Portfolio.route.createUrl(getSlug,getAlbum)+"' id='"+getID+"' data-album='"+getAlbum+"' data-slug='"+getSlug+"' >"+getName+"</a>")});Portfolio.navigation.project.init()},create:function(e,t){var n="",r=e,i=Portfolio.UI.projects,s=Portfolio.UI.projectTemplate.clone(true),o=s.find("h2"),u=s.find(".gallery-description");$projectBody=s.find(".content"),$projectSide=s.find(".side"),getSlug=t;s.attr("id","");$.each($projectSide.find("a"),function(e,t){if($(this).data("album")!=Portfolio.CONFIG.active_album_slug){$(this).remove()}});o.html(Portfolio.CONFIG.active_gallery_title);u.html(Portfolio.navigation.gallery.getActive().find("p").text());$filePath=Portfolio.CONFIG.site_domain+Portfolio.CONFIG.site_root+Portfolio.CONFIG.gallery_images_path;$.each(r,function(e,t){$getID=r[e].pid;$getSource=r[e].filename;$getDescription=r[e].description;$getWidth=r[e].metaWidth;$getHeight=r[e].metaHeight;$getPrevID=r[e].previewpic;if($getID!=$getPrevID){$pic_el="<img src='"+$filePath+getSlug+"/"+$getSource+"' width="+$getWidth+"  height="+$getHeight+" class='projectImage' "+"  id='"+$getID+"'>"+"<div class='description'>"+$getDescription+"</div>";n+=$pic_el}});$projectSide.find("a#"+Portfolio.CONFIG.active_gallery).addClass("active");$projectBody.append(n);$projectBody.css("background-image","url("+$filePath+getSlug+"/bg.jpg)");i.prepend(s)},open:function(){$("html,body").stop();var e,t;if(Portfolio.navigation.project.isSlideForward()){e="right";t="left"}else{e="left";t="right"}Portfolio.UI.projectContainer.slide("in",e,"#projects","slide");Portfolio.template.resize.scrollTop("static");Portfolio.CONFIG.open_popin="project";Portfolio.navigation.changeState(true,"project-open");if(Portfolio.UI.projects.children().size()>1){Portfolio.UI.projectContainer.slide("out",t,"#projects","slide")}},close:function(){Portfolio.navigation.changeState(false,"project-open");Portfolio.template.resize.scrollTop("static");Portfolio.UI.projectContainer.slide("out","left","#projects","slide",function(){var e=Portfolio.navigation.gallery.getRecent();if(e!="")Portfolio.template.resize.scrollTop(e.offset().top-e.height()/2)})}},closepopin:function(){if(Portfolio.CONFIG.open_popin!=""){Portfolio.template[Portfolio.CONFIG.open_popin].close();Portfolio.CONFIG.open_popin=""}},showreel:{init:function(){Portfolio.UI.showreel.find(".closer").click(function(e){e.preventDefault();Portfolio.navigation.home()});var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},loaded:function(){Portfolio.CONFIG.player=new YT.Player("showreel-player",{height:"390",width:"640",videoId:"zh8xD8BE2YA?",events:{onReady:Portfolio.template.showreel.ready}});Portfolio.CONFIG.playerLoaded=true},ready:function(e){Portfolio.template.showreel.pause=function(e){Portfolio.CONFIG.player.stopVideo()};Portfolio.template.showreel.play=function(e){if(Portfolio.CONFIG.playerLoaded){Portfolio.CONFIG.player.playVideo()}}},pause:function(e){},play:function(e){},create:function(){Portfolio.template.showreel.open()},open:function(){Portfolio.UI.showreel.centerThis();Portfolio.template.showreel.play();Portfolio.CONFIG.open_popin="showreel";Portfolio.navigation.changeState(true,"showreel-open")},close:function(){Portfolio.navigation.changeState(false,"showreel-open");Portfolio.template.showreel.pause();Portfolio.CONFIG.open_popin=""},center:function(){var t=Portfolio.CONFIG.video_size;var n=$(e).width()/2-$(e).width()*t/2;var r=$(e).height()/2-$(e).height()*t/2;Portfolio.UI.showreel.css("left",n);Portfolio.UI.showreel.css("top",r/2)}},about:{init:function(){Portfolio.UI.about.find(".closer").click(function(e){e.preventDefault();Portfolio.navigation.home()})},open:function(){Portfolio.UI.aboutContainer.centerThis();Portfolio.UI.aboutContainer.slide("in","top",".panel-container","single");Portfolio.navigation.changeState(true,"about-open");Portfolio.CONFIG.open_popin="about"},close:function(){Portfolio.UI.aboutContainer.slide("out","bottom",".panel-container","single",function(){Portfolio.navigation.changeState(false,"about-open");Portfolio.CONFIG.open_popin=""})}},blackScreen:{init:function(){var e=$("<div class='blackScreen'></div>");Portfolio.UI.root.append(e);$(".blackScreen").click(function(){Portfolio.navigation.home()})},show:function(){$(".blackScreen").show()},hide:function(){$(".blackScreen").hide()}},preloader:{init:function(){var e=$("<div id='preloader'><span id='bar'></span></div>");$("body").append(e)},show:function(){$("#preloader").css("display","block")},hide:function(){$("#preloader").hide()},setLoadingProgress:function(t){var n=$(e).width();var r=n/t;$("#preloader>#bar").css("width",r+"px")}}},route:{init:function(){Portfolio.route.setChangeEvent()},setChangeEvent:function(){$(e).bind("statechange",function(){Portfolio.route.go()})},createUrl:function(e,t){var n="",r="",i="";if(Portfolio.CONFIG.active_gallery!=""||e!=null||t!=null){i=e||Portfolio.UI.galleries.find(".gallery-holder#"+Portfolio.CONFIG.active_gallery).data("slug");r=t||Portfolio.CONFIG.active_album_title;n="/"+i}return Portfolio.CONFIG.site_root+r+n},pushUrl:function(e){var n;if(e==null||e==t){n=Portfolio.route.createUrl()}else{n=Portfolio.CONFIG.site_root+e}var r="LOREN GRIXTI Portfolio : "+Portfolio.CONFIG.active_gallery_slug;Portfolio.GLOBAL.History.pushState(r,"","/"+n);if(_gaq)_gaq.push(["_trackEvent","PORTFOLIO","page",Portfolio.CONFIG.active_gallery_slug])},go:function(){url=e.location.href;var t=url.substr((Portfolio.CONFIG.site_domain+Portfolio.CONFIG.site_root).length,url.length);t=t.replace("#./","");var n=t.split("/");console.log("GOING TO : "+t);switch(t){case"showreel":if(Portfolio.CONFIG.first_time){Portfolio.CONFIG.isDirectAccess=true;Portfolio.init();Portfolio.template.showreel.open()}else{Portfolio.template.showreel.open()}console.log("executed case: showreel");break;case"about":if(Portfolio.CONFIG.first_time){Portfolio.CONFIG.isDirectAccess=true;Portfolio.init();Portfolio.template.about.open()}else{Portfolio.template.about.open()}console.log("executed case: about");break;case"":if(Portfolio.CONFIG.first_time){Portfolio.CONFIG.isDirectAccess=false;Portfolio.init()}else{Portfolio.template.closepopin()}console.log("executed case: home");break;default:if(Portfolio.CONFIG.first_time){Portfolio.CONFIG.isDirectAccess=true;Portfolio.init(function(){Portfolio.navigation.album.setActive(n[0]);Portfolio.navigation.gallery.setActive(n[1]);Portfolio.navigation.gallery.launch(n[1])})}else{if(!Portfolio.CONFIG.isInMotion){Portfolio.navigation.album.setActive(n[0]);if(Portfolio.CONFIG.active_gallery_slug!=n[1]){Portfolio.navigation.gallery.setActive(n[1])}Portfolio.navigation.gallery.launch(n[1])}}console.log("executed case: default")}Portfolio.CONFIG.first_time=false}}};$.fn.centerThis=function(){this.css("top",($(e).height()-this.height())/2);this.css("left",($(e).width()-this.width())/2);return this};$.fn.slide=function(t,n,r,i,s){var o=this.width()/2,u=-this.width()/2,a=this.height()+($(e).height()-this.height())/2,f=n||"left",l=t||"in",c=this,h=90,p=1.5,d;if(l=="in"){d=c.find(r).children(":first");if(f=="left"||f=="right"){if(f=="left"){o=-o;h=-h}Portfolio.CONFIG.isInMotion=true;d.css("left",o).show();d.show();TweenMax.to(d,0,{rotationY:h,z:u,immediateRender:true});d.find(".body").css("backgroundColor","#000000");d.find(".header,.body .gallery-description,.body .content").css("opacity:0");TweenMax.to(d,p,{left:0,rotationY:0,z:0,ease:Expo.easeInOut,onComplete:function(){Portfolio.CONFIG.isInMotion=false}});TweenMax.to(d,0,{zIndex:900,delay:p/2});TweenMax.to(d.find(".body"),p,{backgroundColor:"#FFFFFF"});TweenMax.to(d.find(".header,.body .gallery-description,.body .content"),p,{autoAlpha:1})}if(f=="top"||f=="bottom"){if(f=="top"){a=-a}Portfolio.CONFIG.isInMotion=true;d.css("top",a).show().animate({top:0},800,"easeInOutExpo",function(){Portfolio.CONFIG.isInMotion=false})}}else{d=c.find(r).children(":last");if(f=="left"||f=="right"){if(f=="left"){o=-o;h=-h}Portfolio.CONFIG.isInMotion=true;d.addClass("exiting");TweenMax.to(d,p,{left:o,rotationY:h,ease:Expo.easeInOut,z:u,onComplete:function(){if(i=="slide"){d.remove()}Portfolio.CONFIG.isInMotion=false;if(typeof s=="function"){s.call(this)}}});TweenMax.to(d,0,{zIndex:600,delay:p/2});TweenMax.to(d.find(".body"),p,{backgroundColor:"#000000"});TweenMax.to(d.find(".header,.body .gallery-description,.body .content"),p,{autoAlpha:.1})}if(f=="top"||f=="bottom"){if(f=="bottom"){a=a}Portfolio.CONFIG.isInMotion=true;d.css("top",0).animate({top:a},800,"easeInOutExpo",function(){if(i=="slide"){d.remove()}Portfolio.CONFIG.isInMotion=false;if(typeof s=="function"){s.call(this)}})}}};Portfolio.support();Portfolio.route.go()})(window)